<?php /**
 * Implements hook_permission().
 */
function rnotices_permission()
{
	return array(
		'administer role notices' => array(
			'title'       => t('Role Notices'),
			'description' => t('Something witty goes here.')
		),
	);
}

/**
 * Implements hook_menu().
 */
function rnotices_menu()
{
	$items['admin/people/rnotices'] = array(
		'title'            => 'Role Notices',
		'type'             => MENU_LOCAL_TASK,
		'page callback'    => 'drupal_get_form',
		'access arguments' => array('administer role notices'),
		'page arguments' => array('rnotices_settings')
	);

	return $items;
}

function rnotices_settings($form, &$form_state)
{
	$text                       = variable_get('rnotices_value', '');
	$form['rnotices_all_roles'] = array(
		'#type'          => 'textarea',
		'#title'         => t('Notice for ALL roles'),
		'#default_value' => $text ? $text : 'Default value',
		'#description'   => t('Enter the text here!'),
	);


	$form['submit'] = array(
		'#type'  => 'submit',
		'#value' => 'Save Notices',
	);

	return $form;
}

function rnotices_settings_submit($form, &$form_state)
{
	$text = $form_state['values']['rnotices_all_roles'];
	drupal_set_message(t('You entered') . ' ' . $text);
	variable_set('rnotices_value', $text);
}